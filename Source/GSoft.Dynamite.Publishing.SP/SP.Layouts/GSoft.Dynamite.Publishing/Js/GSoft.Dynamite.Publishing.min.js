window.GSoft=window.GSoft||{};window.GSoft.Dynamite=window.GSoft.Dynamite||{},function(n,t){var i="/_api/search/query";n.Execute=function(n,r,u,f){var e=i;e+="?querytext='";e+=encodeURIComponent(n);e+="'&trimduplicates=false&rowlimit=500&selectproperties='";e+=r;e+="'&QueryTemplatePropertiesUrl='spfile://webroot/queryparametertemplate.xml'";t.ajax({url:e,method:"GET",headers:{Accept:"application/json; odata=verbose"},success:u,error:f})}}(GSoft.Dynamite.Search=GSoft.Dynamite.Search||{},jq111),function(n,t,undefined){function r(n,r,u,f,e,o){var self=this;self.SearchQuery=n;self.SelectProperties=r;self.SelectPropertiesArray=self.SelectProperties.split(",");self.FilterDefinitions=JSON.parse(u);self.ItemKnockoutTemplate=f;self.ItemJavaScriptViewModel=e;self.LazyLoadingTitle=ko.observable("Load more");self.LazyLoadingVisible=ko.observable(!0);self.NoResultTitle=ko.observable("Loading...");self.FiltersTitle=ko.observable("");self.FiltersResetLabel=ko.observable("Reset");self.NbFilteredItems=0;self.Callbacks={};o&&(self.Callbacks=JSON.parse(o));self.Items=ko.observableArray();self.FilteredItems=ko.computed(function(){var n=ko.utils.arrayFilter(self.Items(),function(n){return _.reduce(self.Filters(),function(t,i){return typeof t=="boolean"?t&&i.Filter(n):t.Filter(n)&&i.Filter(n)})});return self.ReloadGrid&&self.ReloadGrid(n.length),self.NbFilteredItems=n.length,_.sortBy(n,function(n){return n.Sort()})});self.Filters=ko.observableArray();_.each(self.FilterDefinitions,function(filterDefinition){var filterViewModel,filter;if(filterDefinition.JavaScriptViewModelFilterType&&filterDefinition.Property){try{filterViewModel=eval(filterDefinition.JavaScriptViewModelFilterType)}catch(e){console.log("[Product Showcase Filter] The type '"+filterDefinition.JavaScriptViewModelFilterType+"' couldn't be resolved. Error Msg: "+e.message)}if(typeof filterViewModel!="function"){console.log("[Product Showcase Filter] The type '"+filterDefinition.JavaScriptViewModelFilterType+"' couldn't be resolved. Not a function.");return}filter=new filterViewModel(filterDefinition.Property,self.Items);self.Filters.push(filter)}});self.ExecuteSearchQuery=function(){var n=i;n+="?querytext='";n+=encodeURIComponent(self.SearchQuery);n+="'&trimduplicates=false&rowlimit=500&selectproperties='";n+=self.SelectProperties;n+="'&QueryTemplatePropertiesUrl='spfile://webroot/queryparametertemplate.xml'";t.ajax({url:n,method:"GET",headers:{Accept:"application/json; odata=verbose"},success:self.OnQuerySuccess,error:self.OnQueryError})};self.OnQuerySuccess=function(data){var results=data.d.query.PrimaryQueryResult.RelevantResults.Table.Rows.results;_.each(results,function(result){var itemViewModel=null,item;try{itemViewModel=eval(self.ItemJavaScriptViewModel)}catch(e){console.log("[Product Showcase] The type '"+self.ItemJavaScriptViewModel+"' couldn't be resolved. Error Msg: "+e.message)}if(typeof itemViewModel!="function"){console.log("[Product Showcase] The type '"+self.ItemJavaScriptViewModel+"' couldn't be resolved. Not a function.");return}item=new itemViewModel;_.each(self.SelectPropertiesArray,function(n){var t=_.where(result.Cells.results,{Key:n});t!==null&&t.length>0&&t[0].Value!==undefined&&typeof item[n]=="function"&&item[n](t[0].Value)});self.Items.push(item)});self.ReloadGrid(self.FilteredItems().length);self.Callbacks&&(self.Callbacks.lazyLoadingTitle&&eval(self.Callbacks.lazyLoadingTitle)(self.LazyLoadingTitle),self.Callbacks.lazyLoadingVisible&&eval(self.Callbacks.lazyLoadingVisible)(self.LazyLoadingVisible,self.FilteredItems().length),self.Callbacks.noResultTitle&&eval(self.Callbacks.noResultTitle)(self.NoResultTitle),self.Callbacks.filtersTitle&&eval(self.Callbacks.filtersTitle)(self.FiltersTitle),self.Callbacks.filtersResetLabel&&eval(self.Callbacks.filtersResetLabel)(self.FiltersResetLabel))};self.OnQueryError=function(n){console.log("[Search REST API] Error with the API Request.");console.log(n)};self.ResetFilters=function(){_.each(self.Filters(),function(n){n.Reset()})};self.LazyLoadingClick=function(){self.Callbacks&&(self.Callbacks.lazyLoadingClickCallback&&eval(self.Callbacks.lazyLoadingClickCallback)(self.NbFilteredItems),self.Callbacks.lazyLoadingVisible&&eval(self.Callbacks.lazyLoadingVisible)(self.LazyLoadingVisible,self.NbFilteredItems))};self.ReloadGrid=function(nbItems){self.Callbacks&&(self.Callbacks.onItemsLoadedCallback&&eval(self.Callbacks.onItemsLoadedCallback)(nbItems),self.Callbacks.lazyLoadingVisible&&eval(self.Callbacks.lazyLoadingVisible)(self.LazyLoadingVisible,nbItems))}}var i="/_api/search/query";n.ViewModel=null;n.Initialize=function(i,u,f,e,o,s){t(document).ready(function(){n.ViewModel=new r(i,u,f,e,o,s);ko.applyBindings(n.ViewModel,t(".showcase")[0]);n.ViewModel.ExecuteSearchQuery()})}}(GSoft.Dynamite.FilteredProductShowcase=GSoft.Dynamite.FilteredProductShowcase||{},jq111),function(n,t,i){"use strict";function r(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}n.tabsContainer={};n.options={};n.Options={start:0};n.ApplyTabs=function(i,u){t(document).ready(function(){n.tabsContainer=t(i)[0];n.options=r({},this.options);r(this.options,u);n.Init()})};n.Init=function(){this.tabs=[].slice.call(n.tabsContainer.querySelectorAll("nav > ul > li"));this.items=[].slice.call(n.tabsContainer.querySelectorAll(".content-wrap > section"));this.current=-1;this.Show();var i=document.forms[MSOWebPartPageFormName].MSOLayout_InDesignMode.value;i=="1"&&_.each(this.items,function(n){t(n).show()});this.InitEvents()};n.InitEvents=function(){var n=this;this.tabs.forEach(function(t,i){t.addEventListener("click",function(t){t.preventDefault();n.Show(i)})})};n.Show=function(n){this.current>=0&&(this.tabs[this.current].className=this.items[this.current].className="");this.current=n!==i?n:this.Options.start>=0&&this.Options.start<this.items.length?this.Options.start:0;this.tabs[this.current].className="tab-current";this.items[this.current].className="content-current"}}(GSoft.Dynamite.Tabs=GSoft.Dynamite.Tabs||{},jq111);
//# sourceMappingURL=GSoft.Dynamite.Publishing.min.js.map
