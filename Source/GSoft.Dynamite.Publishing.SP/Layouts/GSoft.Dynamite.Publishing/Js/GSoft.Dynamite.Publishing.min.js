window.GSoft=window.GSoft||{};window.GSoft.Dynamite=window.GSoft.Dynamite||{},function(n,t){var i="/_api/search/query";n.Execute=function(n,r,u,f){var e=i;e+="?querytext='";e+=encodeURIComponent(n);e+="'&trimduplicates=false&rowlimit=500&selectproperties='";e+=r;e+="'&QueryTemplatePropertiesUrl='spfile://webroot/queryparametertemplate.xml'";t.ajax({url:e,method:"GET",headers:{Accept:"application/json; odata=verbose"},success:u,error:f})}}(GSoft.Dynamite.Search=GSoft.Dynamite.Search||{},jq110),function(n,t,i){function u(n,u,f,e,o,s){var h=this;h.SearchQuery=n;h.SelectProperties=u;h.SelectPropertiesArray=h.SelectProperties.split(",");h.FilterDefinitions=JSON.parse(f);h.ItemKnockoutTemplate=e;h.ItemJavaScriptViewModel=o;h.LazyLoadingTitle=ko.observable("Load more");h.LazyLoadingVisible=ko.observable(!0);h.NoResultTitle=ko.observable("Loading...");h.FiltersTitle=ko.observable("");h.FiltersResetLabel=ko.observable("Reset");h.NbFilteredItems=0;h.Callbacks={};s&&(h.Callbacks=JSON.parse(s));h.Items=ko.observableArray();h.FilteredItems=ko.computed(function(){var n=ko.utils.arrayFilter(h.Items(),function(n){return _.reduce(h.Filters(),function(t,i){return typeof t=="boolean"?t&&i.Filter(n):t.Filter(n)&&i.Filter(n)})});return h.ReloadGrid&&h.ReloadGrid(n.length),h.NbFilteredItems=n.length,_.sortBy(n,function(n){return n.Sort()})});h.Filters=ko.observableArray();_.each(h.FilterDefinitions,function(filterDefinition){if(filterDefinition.JavaScriptViewModelFilterType&&filterDefinition.Property){try{filterViewModel=eval(filterDefinition.JavaScriptViewModelFilterType)}catch(e){console.log("[Product Showcase Filter] The type '"+filterDefinition.JavaScriptViewModelFilterType+"' couldn't be resolved. Error Msg: "+e.message)}if(typeof filterViewModel!="function"){console.log("[Product Showcase Filter] The type '"+filterDefinition.JavaScriptViewModelFilterType+"' couldn't be resolved. Not a function.");return}var filter=new filterViewModel(filterDefinition.Property,h.Items);h.Filters.push(filter)}});h.ExecuteSearchQuery=function(){var n=r;n+="?querytext='";n+=encodeURIComponent(h.SearchQuery);n+="'&trimduplicates=false&rowlimit=500&selectproperties='";n+=h.SelectProperties;n+="'&QueryTemplatePropertiesUrl='spfile://webroot/queryparametertemplate.xml'";t.ajax({url:n,method:"GET",headers:{Accept:"application/json; odata=verbose"},success:h.OnQuerySuccess,error:h.OnQueryError})};h.OnQuerySuccess=function(data){var results=data.d.query.PrimaryQueryResult.RelevantResults.Table.Rows.results;_.each(results,function(result){var itemViewModel=null,item;try{itemViewModel=eval(h.ItemJavaScriptViewModel)}catch(e){console.log("[Product Showcase] The type '"+h.ItemJavaScriptViewModel+"' couldn't be resolved. Error Msg: "+e.message)}if(typeof itemViewModel!="function"){console.log("[Product Showcase] The type '"+h.ItemJavaScriptViewModel+"' couldn't be resolved. Not a function.");return}item=new itemViewModel;_.each(h.SelectPropertiesArray,function(n){var t=_.where(result.Cells.results,{Key:n});t!=null&&t.length>0&&t[0].Value!=i&&typeof item[n]=="function"&&item[n](t[0].Value)});h.Items.push(item)});h.ReloadGrid(h.FilteredItems().length);h.Callbacks&&(h.Callbacks.lazyLoadingTitle&&eval(h.Callbacks.lazyLoadingTitle)(h.LazyLoadingTitle),h.Callbacks.lazyLoadingVisible&&eval(h.Callbacks.lazyLoadingVisible)(h.LazyLoadingVisible,h.FilteredItems().length),h.Callbacks.noResultTitle&&eval(h.Callbacks.noResultTitle)(h.NoResultTitle),h.Callbacks.filtersTitle&&eval(h.Callbacks.filtersTitle)(h.FiltersTitle),h.Callbacks.filtersResetLabel&&eval(h.Callbacks.filtersResetLabel)(h.FiltersResetLabel))};h.OnQueryError=function(n){console.log("[Search REST API] Error with the API Request.");console.log(n)};h.ResetFilters=function(){_.each(h.Filters(),function(n){n.Reset()})};h.LazyLoadingClick=function(){h.Callbacks&&(h.Callbacks.lazyLoadingClickCallback&&eval(h.Callbacks.lazyLoadingClickCallback)(h.NbFilteredItems),h.Callbacks.lazyLoadingVisible&&eval(h.Callbacks.lazyLoadingVisible)(h.LazyLoadingVisible,h.NbFilteredItems))};h.ReloadGrid=function(nbItems){h.Callbacks&&(h.Callbacks.onItemsLoadedCallback&&eval(h.Callbacks.onItemsLoadedCallback)(nbItems),h.Callbacks.lazyLoadingVisible&&eval(h.Callbacks.lazyLoadingVisible)(h.LazyLoadingVisible,nbItems))}}var r="/_api/search/query";n.ViewModel=null;n.Initialize=function(i,r,f,e,o,s){var h=this;t(document).ready(function(){n.ViewModel=new u(i,r,f,e,o,s);ko.applyBindings(n.ViewModel,t(".showcase")[0]);n.ViewModel.ExecuteSearchQuery()})}}(GSoft.Dynamite.FilteredProductShowcase=GSoft.Dynamite.FilteredProductShowcase||{},jq110),function(n,t){function i(emailAddress,contactFormTemplate,javaScriptViewModel){var self=this,form;self.EmailAddress=emailAddress;self.ContactFormTemplate=contactFormTemplate;self.JavaScriptViewModel=javaScriptViewModel;self.ValidationRules=ko.observable();form=eval(self.ContactFormTemplate);self.Form=new form;self.SuccessMessage=self.Form.SuccesMessage;self.SendEmail=function(n,i,r){var u=_spPageContextInfo.webServerRelativeUrl;t.ajax({url:"/_layouts/15/GSoft.Dynamite.Publishing/Handlers/DynamiteEmailService.ashx",type:"POST",dataType:"json",data:{emailTo:n,subject:r,content:i,__REQUESTDIGEST:t("#__REQUESTDIGEST").val()},success:self.OnSucces,error:self.OnError})};self.OnSucces=function(){var n=t(".row.row-notifications").noty({text:self.SuccessMessage,type:"success",timeout:4e3})};self.OnError=function(){var n=t(".row.row-notifications").noty({text:self.ErrorMessage,type:"error"})};self.ConfigureEmail=function(){t(document).ready(function(){self.Form.Submit(data);var n=r(self.JavaScriptViewModel);u();self.SendEmail(self.EmailAddress,n,"formulaire de contact")})};t(document).ready(function(){var n=document.forms[MSOWebPartPageFormName].MSOLayout_InDesignMode.value;n!="1"&&t("#form-submit").click(function(){t("#aspnetForm").valid()&&self.ConfigureEmail()})})}function r(javaScriptViewModel){var itemViewModel=eval(javaScriptViewModel),result=new itemViewModel,body;return ko.applyBindings(result,t(".contact-form.form-footer")[0]),body=t(".contact-form.email-body").html(),ko.cleanNode(t(".contact-form.form-footer")[0]),body}function u(){var n=t(".contact-form.form-body :input");_.each(n,function(n){t(n).val("")})}n.ViewModel=null;n.Initialize=function(r,u,f,e){var o=this;t(document).ready(function(){n.ViewModel=new i(r,u,f,e);ko.applyBindings(n.ViewModel,t(".contact-form.form-body")[0])})}}(GSoft.Dynamite.ContactForm=GSoft.Dynamite.ContactForm||{},jq110),function(n,t,i){"use strict";function r(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}n.tabsContainer={};n.options={};n.Options={start:0};n.ApplyTabs=function(i,u){t(document).ready(function(){n.tabsContainer=t(i)[0];n.options=r({},this.options);r(this.options,u);n.Init()})};n.Init=function(){this.tabs=[].slice.call(n.tabsContainer.querySelectorAll("nav > ul > li"));this.items=[].slice.call(n.tabsContainer.querySelectorAll(".content-wrap > section"));this.current=-1;this.Show();var i=document.forms[MSOWebPartPageFormName].MSOLayout_InDesignMode.value;i=="1"&&_.each(this.items,function(n){t(n).show()});this.InitEvents()};n.InitEvents=function(){var n=this;this.tabs.forEach(function(t,i){t.addEventListener("click",function(t){t.preventDefault();n.Show(i)})})};n.Show=function(n){this.current>=0&&(this.tabs[this.current].className=this.items[this.current].className="");this.current=n!=i?n:this.Options.start>=0&&this.Options.start<this.items.length?this.Options.start:0;this.tabs[this.current].className="tab-current";this.items[this.current].className="content-current"}}(GSoft.Dynamite.Tabs=GSoft.Dynamite.Tabs||{},jq110);
/*
//# sourceMappingURL=GSoft.Dynamite.Publishing.min.js.map
*/